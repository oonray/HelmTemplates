{{ define "namespace" }}
{{ if .Values.namespace.env }}
namespace: "{{ .Chart.Name }}-{{ .Values.environment }}"
{{ else }}
namespace: "{{ .Chart.Name }}"
{{ end }}
{{ end }}

{{ define "labels" }}
app: "{{ .Chart.Name }}-kali-{{ .Values.environment }}"
env: "{{ .Values.environment }}"
{{ end }}

{{ define "labels.extra" }}
{{ range $lbl := .labels }}
{{ $lbl.key }}: {{ $lbl.value | quote}}
{{ end }}
{{ end }}

{{ define "service.port.tcp" }}
- port: {{ .port }}
  targetPort: {{ .name }}
  protocol: TCP
{{ end }}

{{ define "service.port.udp" }}
- port: {{ .port }}
  targetPort: {{ .name }}
  protocol: UDP
{{ end }}

{{ define "pvc" }}
- name: {{ .name }}
  persistentVolumeClaim:
    claimName: {{ .claim }}
{{ end }}
